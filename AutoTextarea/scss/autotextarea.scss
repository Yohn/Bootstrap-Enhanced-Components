// AutoTextarea SCSS - Bootstrap 5.3 Variables Integration
// Variables using Bootstrap 5.3 CSS custom properties

// Component-specific variables
$autotextarea-transition-duration: 150ms !default;
$autotextarea-transition-easing: ease-out !default;
$autotextarea-min-height: 60px !default;
$autotextarea-max-height: 400px !default;
$autotextarea-resize-indicator-size: 12px !default;
$autotextarea-focus-glow-size: 2px !default;

// Bootstrap 5.3 variable integration
$autotextarea-border-radius: var(--bs-border-radius) !default;
$autotextarea-border-width: var(--bs-border-width) !default;
$autotextarea-border-color: var(--bs-border-color) !default;
$autotextarea-focus-border-color: var(--bs-primary) !default;
$autotextarea-bg: var(--bs-body-bg) !default;
$autotextarea-text-color: var(--bs-body-color) !default;
$autotextarea-placeholder-color: var(--bs-secondary-color) !default;

// Dark mode variables
$autotextarea-dark-bg: var(--bs-dark) !default;
$autotextarea-dark-border: var(--bs-gray-700) !default;
$autotextarea-dark-text: var(--bs-gray-100) !default;
$autotextarea-dark-placeholder: var(--bs-gray-400) !default;

// Base AutoTextarea styles
.autotextarea {
	// Hover state
	&:hover:not(:focus) {
		border-color: var(--bs-gray-400);
	}

	// Disabled state
	&:disabled {
		background-color: var(--bs-gray-100);
		border-color: var(--bs-gray-300);
		color: var(--bs-gray-600);
		cursor: not-allowed;
		resize: none;
	}

	// Read-only state
	&[readonly] {
		background-color: var(--bs-gray-50);
		border-color: var(--bs-gray-300);
	}
}

// Focused state class (applied via JavaScript)
.autotextarea-focused {
	border-color: $autotextarea-focus-border-color !important;
	box-shadow: 0 0 0 $autotextarea-focus-glow-size rgba(var(--bs-primary-rgb), 0.25) !important;
}

// Initialization state
.autotextarea-initialized {
	// Add subtle animation for initialization
	animation: autotextarea-init 0.3s ease-out;
}

// Resize indicator (optional visual cue)
.autotextarea-with-indicator {
	position: relative;

	&::after {
		content: '';
		position: absolute;
		bottom: 2px;
		right: 2px;
		width: $autotextarea-resize-indicator-size;
		height: $autotextarea-resize-indicator-size;
		background: linear-gradient(
			135deg,
			transparent 0%,
			transparent 40%,
			var(--bs-gray-400) 40%,
			var(--bs-gray-400) 50%,
			transparent 50%,
			transparent 60%,
			var(--bs-gray-400) 60%,
			var(--bs-gray-400) 70%,
			transparent 70%
		);
		opacity: 0.3;
		pointer-events: none;
		transition: opacity 0.15s ease-in-out;
	}

	&:hover::after {
		opacity: 0.6;
	}
}

// Size variants
.autotextarea-sm {
	min-height: 40px;
	font-size: var(--bs-font-size-sm);
	padding: 0.375rem 0.5rem;
}

.autotextarea-lg {
	min-height: 80px;
	font-size: var(--bs-font-size-lg);
	padding: 0.75rem 1rem;
}

// Dark mode support
[data-bs-theme="dark"] {
	.autotextarea {
		background-color: $autotextarea-dark-bg;
		border-color: $autotextarea-dark-border;
		color: $autotextarea-dark-text;

		&::placeholder {
			color: $autotextarea-dark-placeholder;
		}

		&:hover:not(:focus) {
			border-color: var(--bs-gray-600);
		}

		&:disabled {
			background-color: var(--bs-gray-800);
			border-color: var(--bs-gray-700);
			color: var(--bs-gray-500);
		}

		&[readonly] {
			background-color: var(--bs-gray-900);
			border-color: var(--bs-gray-700);
		}
	}

	.autotextarea-with-indicator::after {
		background: linear-gradient(
			135deg,
			transparent 0%,
			transparent 40%,
			var(--bs-gray-500) 40%,
			var(--bs-gray-500) 50%,
			transparent 50%,
			transparent 60%,
			var(--bs-gray-500) 60%,
			var(--bs-gray-500) 70%,
			transparent 70%
		);
	}
}

// Animation keyframes
@keyframes autotextarea-init {
	0% {
		opacity: 0.8;
		transform: scale(0.998);
	}
	100% {
		opacity: 1;
		transform: scale(1);
	}
}

@keyframes autotextarea-resize {
	0% {
		transform: scaleY(0.98);
	}
	100% {
		transform: scaleY(1);
	}
}

// High contrast mode support
@media (prefers-contrast: high) {
	.autotextarea {
		border-width: 2px;
		border-color: var(--bs-dark);

		&:focus {
			border-color: var(--bs-primary);
			box-shadow: 0 0 0 3px rgba(var(--bs-primary-rgb), 0.5);
		}
	}
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
	.autotextarea {
		transition: none !important;
		animation: none !important;
	}

	.autotextarea-initialized {
		animation: none !important;
	}
}

// Print styles
@media print {
	.autotextarea {
		border: 1px solid #000 !important;
		background: transparent !important;
		box-shadow: none !important;

		&::after {
			display: none !important;
		}
	}
}

// Bootstrap form integration
.form-floating {
	.autotextarea {
		// Ensure proper spacing with floating labels
		padding-top: 1.625rem;
		padding-bottom: 0.625rem;
		min-height: calc(3.5rem + 2px);

		&:focus,
		&:not(:placeholder-shown) {
			padding-top: 1.625rem;
			padding-bottom: 0.625rem;
		}

		// Adjust for small variant
		&.autotextarea-sm {
			padding-top: 1.25rem;
			padding-bottom: 0.375rem;
			min-height: calc(2.5rem + 2px);
		}

		// Adjust for large variant
		&.autotextarea-lg {
			padding-top: 2rem;
			padding-bottom: 0.75rem;
			min-height: calc(4rem + 2px);
		}
	}
}

// Input group integration
.input-group {
	.autotextarea {
		// Ensure proper border radius in input groups
		&:not(:first-child) {
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;
		}

		&:not(:last-child) {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
		}
	}
}

// Validation states
.autotextarea {
	&.is-valid {
		border-color: var(--bs-success);

		&:focus {
			border-color: var(--bs-success);
			box-shadow: 0 0 0 $autotextarea-focus-glow-size rgba(var(--bs-success-rgb), 0.25);
		}
	}

	&.is-invalid {
		border-color: var(--bs-danger);

		&:focus {
			border-color: var(--bs-danger);
			box-shadow: 0 0 0 $autotextarea-focus-glow-size rgba(var(--bs-danger-rgb), 0.25);
		}
	}
}

// Custom scrollbar for when max height is reached
.autotextarea {
	&::-webkit-scrollbar {
		width: 8px;
	}

	&::-webkit-scrollbar-track {
		background: var(--bs-gray-100);
		border-radius: 4px;
	}

	&::-webkit-scrollbar-thumb {
		background: var(--bs-gray-400);
		border-radius: 4px;

		&:hover {
			background: var(--bs-gray-500);
		}
	}
}

// Dark mode scrollbar
[data-bs-theme="dark"] {
	.autotextarea {
		&::-webkit-scrollbar-track {
			background: var(--bs-gray-800);
		}

		&::-webkit-scrollbar-thumb {
			background: var(--bs-gray-600);

			&:hover {
				background: var(--bs-gray-500);
			}
		}
	}
}
	/*
	//Core functionality
	resize: none !important;
	overflow: hidden;
	transition: height $autotextarea-transition-duration $autotextarea-transition-easing;

	// Bootstrap integration
	border-radius: $autotextarea-border-radius;
	border-width: $autotextarea-border-width;
	border-style: solid;
	border-color: $autotextarea-border-color;
	background-color: $autotextarea-bg;
	color: $autotextarea-text-color;

	// Minimum height constraint
	min-height: $autotextarea-min-height;

	// Placeholder styling
	&::placeholder {
		color: $autotextarea-placeholder-color;
		opacity: 0.75;
		transition: opacity 0.15s ease-in-out;
	}

	// Focus state
	&:focus {
		outline: none;
		border-color: $autotextarea-focus-border-color;
		box-shadow: 0 0 0 $autotextarea-focus-glow-size rgba(var(--bs-primary-rgb), 0.25);

		&::placeholder {
			opacity: 0.5;
		}
	}*/