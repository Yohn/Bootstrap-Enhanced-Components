<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Human-Verified Form - Advanced Bot Protection</title>
	<!-- Bootstrap 5.3.7 CSS -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/css/bootstrap.min.css" rel="stylesheet">
	<style>
		.verification-indicator {
			position: fixed;
			top: 20px;
			right: 20px;
			z-index: 1050;
			min-width: 200px;
		}

		.verification-level {
			padding: 0.5rem 1rem;
			border-radius: 20px;
			font-weight: 600;
			text-align: center;
			margin-bottom: 0.5rem;
		}

		.level-none {
			background: linear-gradient(45deg, #6c757d, #495057);
		}

		.level-basic {
			background: linear-gradient(45deg, #ffc107, #fd7e14);
		}

		.level-enhanced {
			background: linear-gradient(45deg, #17a2b8, #20c997);
		}

		.level-verified {
			background: linear-gradient(45deg, #28a745, #20c997);
			animation: pulse-success 2s infinite;
		}

		@keyframes pulse-success {

			0%,
			100% {
				box-shadow: 0 0 10px rgba(40, 167, 69, 0.3);
			}

			50% {
				box-shadow: 0 0 20px rgba(40, 167, 69, 0.6);
			}
		}

		.form-protection-info {
			background: rgba(255, 255, 255, 0.05);
			border: 1px solid rgba(255, 255, 255, 0.1);
			border-radius: 10px;
		}

		.interaction-zone {
			min-height: 200px;
			border: 2px dashed rgba(255, 255, 255, 0.3);
			background: rgba(255, 255, 255, 0.02);
			border-radius: 10px;
			transition: all 0.3s ease;
		}

		.interaction-zone:hover {
			background: rgba(255, 255, 255, 0.05);
			border-color: rgba(255, 255, 255, 0.5);
		}

		.verification-progress {
			height: 6px;
			border-radius: 3px;
		}

		.security-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: #28a745;
			color: white;
			border-radius: 50%;
			width: 20px;
			height: 20px;
			font-size: 12px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.form-section {
			margin-bottom: 2rem;
			padding: 1.5rem;
			background: rgba(255, 255, 255, 0.03);
			border-radius: 10px;
			border: 1px solid rgba(255, 255, 255, 0.1);
		}
	</style>
</head>
<body class="bg-dark text-light">
	<!-- Verification Indicator -->
	<div id="verificationIndicator" class="verification-indicator">
		<div class="card bg-dark border-secondary">
			<div class="card-body p-3">
				<div class="d-flex align-items-center mb-2">
					<div class="security-badge">üõ°Ô∏è</div>
					<h6 class="mb-0">Human Verification</h6>
				</div>
				<div id="verificationLevel" class="verification-level level-none"> ANALYZING... </div>
				<div class="mb-2">
					<small class="text-muted">Confidence Score</small>
					<div class="progress verification-progress">
						<div id="confidenceBar" class="progress-bar bg-info" style="width: 50%"></div>
					</div>
					<small id="confidenceText" class="text-muted">50%</small>
				</div>
				<div class="small text-muted">
					<div>Session: <span id="sessionTime">0s</span></div>
					<div>Interactions: <span id="interactionCount">0</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="container py-5">
		<div class="row justify-content-center">
			<div class="col-lg-8">
				<!-- Header -->
				<div class="text-center mb-5">
					<h1 class="display-5 mb-3">üîí Secure Contact Form</h1>
					<p class="lead text-muted"> Advanced bot protection with behavioral analysis </p>
				</div>
				<!-- Protection Info -->
				<div class="form-protection-info p-4 mb-4">
					<h5 class="mb-3">
						<i class="bi bi-shield-check"></i> Multi-Layer Protection Active
					</h5>
					<div class="row">
						<div class="col-md-6">
							<ul class="list-unstyled small">
								<li>‚úÖ Behavioral tracking</li>
								<li>‚úÖ Timing analysis</li>
								<li>‚úÖ Interaction monitoring</li>
							</ul>
						</div>
						<div class="col-md-6">
							<ul class="list-unstyled small">
								<li>‚úÖ Mouse pattern analysis</li>
								<li>‚úÖ Keyboard rhythm detection</li>
								<li>‚úÖ Security checks</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- Main Form -->
				<form id="protectedForm" class="needs-validation" novalidate>
					<!-- Personal Information Section -->
					<div class="form-section">
						<h5 class="mb-4">üìù Personal Information</h5>
						<div class="row">
							<div class="col-md-6 mb-3">
								<label for="firstName" class="form-label">First Name *</label>
								<input type="text" id="firstName" name="firstName" class="form-control" required>
								<div class="valid-feedback">Looks good!</div>
								<div class="invalid-feedback">Please provide your first name.</div>
							</div>
							<div class="col-md-6 mb-3">
								<label for="lastName" class="form-label">Last Name *</label>
								<input type="text" id="lastName" name="lastName" class="form-control" required>
								<div class="valid-feedback">Looks good!</div>
								<div class="invalid-feedback">Please provide your last name.</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-6 mb-3">
								<label for="email" class="form-label">Email Address *</label>
								<input type="email" id="email" name="email" class="form-control" required>
								<div class="valid-feedback">Email looks good!</div>
								<div class="invalid-feedback">Please provide a valid email address.</div>
							</div>
							<div class="col-md-6 mb-3">
								<label for="phone" class="form-label">Phone Number</label>
								<input type="tel" id="phone" name="phone" class="form-control" data-mask="phone">
								<div class="form-text">Format: (555) 123-4567</div>
							</div>
						</div>
					</div>
					<!-- Message Section -->
					<div class="form-section">
						<h5 class="mb-4">üí¨ Your Message</h5>
						<div class="mb-3">
							<label for="subject" class="form-label">Subject *</label>
							<select id="subject" name="subject" class="form-select" required>
								<option value="">Choose a subject...</option>
								<option value="general">General Inquiry</option>
								<option value="support">Technical Support</option>
								<option value="sales">Sales Question</option>
								<option value="feedback">Feedback</option>
								<option value="other">Other</option>
							</select>
							<div class="invalid-feedback">Please select a subject.</div>
						</div>
						<div class="mb-3">
							<label for="message" class="form-label">Message *</label>
							<textarea id="message" name="message" class="form-control" rows="5" required
								placeholder="Please describe your inquiry in detail..."></textarea>
							<div class="invalid-feedback">Please provide your message.</div>
						</div>
					</div>
					<!-- Interaction Test Zone -->
					<div class="form-section">
						<h5 class="mb-4">üéØ Interaction Verification</h5>
						<p class="text-muted mb-3"> Please interact with the elements below to verify you're human: </p>
						<div class="interaction-zone d-flex flex-column justify-content-center align-items-center p-4">
							<div class="mb-3">
								<button type="button" class="btn btn-outline-primary me-2">Click Me</button>
								<button type="button" class="btn btn-outline-success me-2">Or This</button>
								<button type="button" class="btn btn-outline-info">Or This One</button>
							</div>
							<div class="mb-3 w-75">
								<input type="range" class="form-range" min="0" max="100" value="50" id="interactionSlider">
								<div class="text-center">
									<small class="text-muted">Move the slider: <span id="sliderValue">50</span>%</small>
								</div>
							</div>
							<div class="w-75">
								<input type="text" class="form-control" placeholder="Type something here...">
							</div>
						</div>
					</div>
					<!-- Preferences Section -->
					<div class="form-section">
						<h5 class="mb-4">‚öôÔ∏è Preferences</h5>
						<div class="row">
							<div class="col-md-6">
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="newsletter" name="preferences[]"
										value="newsletter">
									<label class="form-check-label" for="newsletter"> Subscribe to newsletter </label>
								</div>
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="updates" name="preferences[]" value="updates">
									<label class="form-check-label" for="updates"> Receive product updates </label>
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-check">
									<input class="form-check-input" type="radio" name="contact_method" id="email_contact" value="email"
										checked>
									<label class="form-check-label" for="email_contact"> Contact via email </label>
								</div>
								<div class="form-check">
									<input class="form-check-input" type="radio" name="contact_method" id="phone_contact" value="phone">
									<label class="form-check-label" for="phone_contact"> Contact via phone </label>
								</div>
							</div>
						</div>
					</div>
					<!-- Verification Status -->
					<div class="form-section">
						<h5 class="mb-4">üõ°Ô∏è Security Status</h5>
						<div class="row">
							<div class="col-md-6">
								<div class="card bg-dark border-secondary h-100">
									<div class="card-body">
										<h6 class="card-title">Behavioral Analysis</h6>
										<div class="mb-2">
											<small class="text-muted">Mouse Activity</small>
											<div class="progress verification-progress">
												<div id="mouseProgress" class="progress-bar bg-primary" style="width: 0%"></div>
											</div>
										</div>
										<div class="mb-2">
											<small class="text-muted">Keyboard Activity</small>
											<div class="progress verification-progress">
												<div id="keyboardProgress" class="progress-bar bg-success" style="width: 0%"></div>
											</div>
										</div>
										<div>
											<small class="text-muted">Form Engagement</small>
											<div class="progress verification-progress">
												<div id="engagementProgress" class="progress-bar bg-info" style="width: 0%"></div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6">
								<div class="card bg-dark border-secondary h-100">
									<div class="card-body">
										<h6 class="card-title">Security Checks</h6>
										<div class="d-flex justify-content-between align-items-center mb-2">
											<small>Timing Analysis</small>
											<span id="timingCheck" class="badge bg-secondary">Checking...</span>
										</div>
										<div class="d-flex justify-content-between align-items-center mb-2">
											<small>Interaction Patterns</small>
											<span id="patternCheck" class="badge bg-secondary">Checking...</span>
										</div>
										<div class="d-flex justify-content-between align-items-center">
											<small>Human Verification</small>
											<span id="humanCheck" class="badge bg-secondary">Pending...</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Submit Section -->
					<div class="form-section text-center">
						<div id="submitStatus" class="mb-3">
							<div class="alert alert-info">
								<i class="bi bi-clock"></i> Please interact with the form for at least 10 seconds before submitting.
							</div>
						</div>
						<button type="submit" id="submitBtn" class="btn btn-primary btn-lg" disabled>
							<span class="spinner-border spinner-border-sm d-none me-2" id="submitSpinner"></span> Submit Form
						</button>
						<div class="mt-2">
							<small class="text-muted"> üîí Your submission is protected by advanced anti-bot technology </small>
						</div>
					</div>
				</form>
				<!-- Debug Panel (for demonstration) -->
				<div class="mt-5">
					<div class="card bg-dark border-secondary">
						<div class="card-header">
							<h6 class="mb-0">üîç Debug Information (Demo Only)</h6>
						</div>
						<div class="card-body">
							<div class="row">
								<div class="col-md-6">
									<h6>Verification Data</h6>
									<pre id="debugInfo" class="small bg-black p-2 rounded"
										style="font-size: 0.7rem; max-height: 200px; overflow-y: auto;"></pre>
								</div>
								<div class="col-md-6">
									<h6>Activity Log</h6>
									<div id="activityLog" class="bg-black p-2 rounded small"
										style="font-size: 0.7rem; max-height: 200px; overflow-y: auto;">
										<div class="text-muted">Waiting for activity...</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Bootstrap JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js"></script>
	<!-- Include our components -->
	<script src="js/BehaviorTracker.js"></script>
	<script src="js/HumanVerificationForm.js"></script>
	<!-- Demo Script -->
	<script>
		class FormProtectionDemo {
			constructor() {
				this.verificationForm = null;
				this.updateInterval = null;

				this._initializeDemo();
			}

			_initializeDemo() {
				// Initialize the human verification system
				this.verificationForm = new HumanVerificationForm('#protectedForm', {
					// Custom configuration
					behaviorTracking: {
						enabled: true,
						minTrackingTime: 10000, // 10 seconds for demo
						requiredInteractions: 3,
						botScoreThreshold: 0.3,
						humanScoreThreshold: 0.7
					},

					timingChecks: {
						minFillTime: 5000, // 5 seconds minimum for demo
						maxFillTime: 1800000,
						suspiciousFastFill: 1000
					},

					// Callbacks
					onVerificationStart: (data) => {
						this._logActivity('Verification system started', 'info');
						this._startUIUpdates();
					},

					onVerificationComplete: (verification, data) => {
						this._logActivity('Form submitted successfully!', 'success');
						this._showSuccess(verification);
					},

					onSubmissionBlocked: (verification, data) => {
						this._logActivity('Form submission blocked', 'danger');
						this._showBlocked(verification);
					},

					onBotDetected: (analysis) => {
						this._logActivity('Bot behavior detected!', 'warning');
					},

					onHumanVerified: (analysis) => {
						this._logActivity('Human behavior verified!', 'success');
					}
				});

				this._setupDemoElements();
			}

			_setupDemoElements() {
				// Slider interaction
				const slider = document.getElementById('interactionSlider');
				const sliderValue = document.getElementById('sliderValue');

				slider.addEventListener('input', (e) => {
					sliderValue.textContent = e.target.value;
					this._logActivity(`Slider moved to ${e.target.value}%`, 'info');
				});

				// Button interactions
				document.querySelectorAll('.interaction-zone button').forEach(btn => {
					btn.addEventListener('click', () => {
						this._logActivity(`Button clicked: "${btn.textContent}"`, 'info');
						btn.classList.add('btn-outline-light');
						setTimeout(() => btn.classList.remove('btn-outline-light'), 300);
					});
				});

				// Form validation
				document.getElementById('protectedForm').addEventListener('input', () => {
					this._updateFormValidation();
				});
			}

			_startUIUpdates() {
				this.updateInterval = setInterval(() => {
					this._updateUI();
				}, 1000);
			}

			_updateUI() {
				const status = this.verificationForm.getVerificationStatus();

				// Update verification indicator
				this._updateVerificationIndicator(status);

				// Update security checks
				this._updateSecurityChecks(status);

				// Update progress bars
				this._updateProgressBars(status);

				// Update submit button
				this._updateSubmitButton(status);

				// Update debug info
				this._updateDebugInfo(status);
			}

			_updateVerificationIndicator(status) {
				const levelElement = document.getElementById('verificationLevel');
				const confidenceBar = document.getElementById('confidenceBar');
				const confidenceText = document.getElementById('confidenceText');
				const sessionTime = document.getElementById('sessionTime');
				const interactionCount = document.getElementById('interactionCount');

				// Update level
				levelElement.className = `verification-level level-${status.level}`;
				levelElement.textContent = status.level.toUpperCase();

				// Update confidence
				const confidence = Math.round(status.confidence * 100);
				confidenceBar.style.width = `${confidence}%`;
				confidenceText.textContent = `${confidence}%`;

				// Update session info
				sessionTime.textContent = `${Math.round(status.sessionTime / 1000)}s`;
				interactionCount.textContent = this.verificationForm.verificationData.fieldInteractions.size;
			}

			_updateSecurityChecks(status) {
				const timingCheck = document.getElementById('timingCheck');
				const patternCheck = document.getElementById('patternCheck');
				const humanCheck = document.getElementById('humanCheck');

				// Timing check
				if (status.sessionTime >= 10000) {
					timingCheck.className = 'badge bg-success';
					timingCheck.textContent = 'Passed';
				} else {
					timingCheck.className = 'badge bg-warning';
					timingCheck.textContent = 'Checking...';
				}

				// Pattern check
				if (status.confidence > 0.6) {
					patternCheck.className = 'badge bg-success';
					patternCheck.textContent = 'Natural';
				} else if (status.confidence > 0.3) {
					patternCheck.className = 'badge bg-warning';
					patternCheck.textContent = 'Analyzing...';
				} else {
					patternCheck.className = 'badge bg-danger';
					patternCheck.textContent = 'Suspicious';
				}

				// Human check
				if (status.isVerified) {
					humanCheck.className = 'badge bg-success';
					humanCheck.textContent = 'Verified';
				} else if (status.level === 'enhanced') {
					humanCheck.className = 'badge bg-info';
					humanCheck.textContent = 'Likely Human';
				} else {
					humanCheck.className = 'badge bg-secondary';
					humanCheck.textContent = 'Pending...';
				}
			}

			_updateProgressBars(status) {
				const mouseProgress = document.getElementById('mouseProgress');
				const keyboardProgress = document.getElementById('keyboardProgress');
				const engagementProgress = document.getElementById('engagementProgress');

				// Mouse activity (based on movements)
				const mouseActivity = Math.min(100, this.verificationForm.verificationData.mouseMovements / 50 * 100);
				mouseProgress.style.width = `${mouseActivity}%`;

				// Keyboard activity (based on keystrokes)
				const keyboardActivity = Math.min(100, this.verificationForm.verificationData.keystrokes / 20 * 100);
				keyboardProgress.style.width = `${keyboardActivity}%`;

				// Engagement (based on field interactions)
				const engagementActivity = Math.min(100, this.verificationForm.verificationData.fieldInteractions.size / 5 * 100);
				engagementProgress.style.width = `${engagementActivity}%`;
			}

			_updateSubmitButton(status) {
				const submitBtn = document.getElementById('submitBtn');
				const submitStatus = document.getElementById('submitStatus');

				if (status.isVerified) {
					submitBtn.disabled = false;
					submitBtn.className = 'btn btn-success btn-lg';
					submitStatus.innerHTML = `
						<div class="alert alert-success">
							<i class="bi bi-check-circle"></i>
							Verification complete! You may now submit the form.
						</div>
					`;
				} else if (status.level === 'enhanced' && status.sessionTime >= 10000) {
					submitBtn.disabled = false;
					submitBtn.className = 'btn btn-warning btn-lg';
					submitStatus.innerHTML = `
						<div class="alert alert-warning">
							<i class="bi bi-exclamation-triangle"></i>
							Enhanced verification required. Additional checks may apply.
						</div>
					`;
				} else if (status.sessionTime < 10000) {
					submitBtn.disabled = true;
					const remaining = Math.ceil((10000 - status.sessionTime) / 1000);
					submitStatus.innerHTML = `
						<div class="alert alert-info">
							<i class="bi bi-clock"></i>
							Please interact with the form for ${remaining} more seconds.
						</div>
					`;
				} else {
					submitBtn.disabled = true;
					submitStatus.innerHTML = `
						<div class="alert alert-warning">
							<i class="bi bi-exclamation-triangle"></i>
							Please complete the verification requirements above.
						</div>
					`;
				}
			}

			_updateFormValidation() {
				// Basic Bootstrap validation
				const form = document.getElementById('protectedForm');
				const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
				let validCount = 0;

				inputs.forEach(input => {
					if (input.checkValidity()) {
						validCount++;
						input.classList.add('is-valid');
						input.classList.remove('is-invalid');
					} else if (input.value) {
						input.classList.add('is-invalid');
						input.classList.remove('is-valid');
					}
				});

				// Update progress if enough fields are valid
				if (validCount >= inputs.length * 0.8) {
					this._logActivity('Form validation looking good!', 'success');
				}
			}

			_updateDebugInfo(status) {
				const debugInfo = document.getElementById('debugInfo');
				const data = {
					level: status.level,
					score: status.score,
					confidence: Math.round(status.confidence * 100),
					sessionTime: Math.round(status.sessionTime / 1000),
					interactions: this.verificationForm.verificationData.fieldInteractions.size,
					mouseMovements: this.verificationForm.verificationData.mouseMovements,
					keystrokes: this.verificationForm.verificationData.keystrokes,
					suspiciousFlags: status.suspiciousFlags,
					isVerified: status.isVerified
				};

				debugInfo.textContent = JSON.stringify(data, null, 2);
			}

			_logActivity(message, type = 'info') {
				const activityLog = document.getElementById('activityLog');
				const timestamp = new Date().toLocaleTimeString();

				const logEntry = document.createElement('div');
				logEntry.className = `text-${type} mb-1`;
				logEntry.innerHTML = `<small>[${timestamp}]</small> ${message}`;

				if (activityLog.children.length === 1 && activityLog.children[0].textContent.includes('Waiting')) {
					activityLog.innerHTML = '';
				}

				activityLog.appendChild(logEntry);
				activityLog.scrollTop = activityLog.scrollHeight;

				// Limit entries
				while (activityLog.children.length > 20) {
					activityLog.removeChild(activityLog.firstChild);
				}
			}

			_showSuccess(verification) {
				// Show success modal or message
				alert(`Form submitted successfully!\nVerification Score: ${verification.score}\nConfidence: ${Math.round(verification.confidence * 100)}%`);
			}

			_showBlocked(verification) {
				// Show blocked message
				alert(`Form submission blocked.\nReason: ${verification.reason}\nRecommendations: ${verification.recommendations.join(', ')}`);
			}
		}

		// Initialize when DOM is ready
		document.addEventListener('DOMContentLoaded', () => {
			window.formDemo = new FormProtectionDemo();
		});
	</script>
</body>
</html>